<div ng-controller="be2CombatController as ctl">
	<div class="row">
		<div class="col-lg-12 cold-md-12 col-sm-12">
		<div class="row">
		<div class="col-lg-12 col-md-12 col-sm-12">
			<h2><span class="glyphicon glyphicon-fire"></span> Combat Simulator</h2>
			<p class="well well-sm">Welcome to the combat simulator!</p>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-12 col-md-12 col-sm-12">
			<div class="btn-toolbar">
				<div class="btn-group">
					<button class="btn btn-default" ng-click="ctl.startCombat()">Start Combat</button>
					<button class="btn btn-default" ng-click="ctl.stopCombat()">Stop Combat</button>
					<button class="btn btn-default disabled">Pause Combat</button>
					<button class="btn btn-default disabled">Reset Combat</button>
				</div>
				<div class="btn-group">
					<button class="btn btn-default" ng-click="ctl.test()">Test</button>
				</div>
			</div>
		</div>
	</div>
	<!--<div class="row">
		<!--<div class="col-sm-12 col-md-12 col-lg-12">
			<h4>Combat Progress: {{ui.combat.status}}</h4>
			<uib-progressbar class="progress-striped active" value="ui.combat.progress" type="info"><span ng-show="ui.combat.current > 0">{{ui.combat.current}}/{{ui.combat.max}}</span></uib-progressbar>
		</div>
	</div>-->
	<div class="row top-buffer-md">
		<div class="col-sm-12 col-md-12 col-lg-12">
			<div class="panel panel-primary">
				<div class="panel-heading"><h3 class="panel-title panel-title-lg">Combat Results</h3></div>
				<div class="panel-body">
					<div class="well well-sm" ng-repeat="combat in ui.combat.logs">
						<button class="pull-right btn btn-danger" ng-click="ctl.purgeCombat(combat.uuid)">Purge</button>
						<h3>{{combat.name}}</h3>
						<ul>
							<li ng-repeat="round in combat.rounds">
								<h6>Round {{$index+1}}</h6>
								<ul>
									<li ng-repeat="(key,unit) in hasHits(round.units)">
										<span class="text-success" ng-repeat="hit in unit.hits | filter: hitFilter">
											{{ui.units[key].unit.name}} fired at {{hit.targetName}} ({{hit.hitRoll}}%) for {{hit.damage}} of {{hit.damageMax}} ({{hit.damageRoll}}%) damage.
										</span>
										<span class="text-warning" ng-repeat="hit in unit.hits | filter: missFilter">
											{{ui.units[key].unit.name}} fired at {{hit.targetName}} and missed ({{hit.hitRoll}}%).
										</span>
									</li>
									<li ng-repeat="key in destroyedUnits(round)">
										<span class="text-danger">{{ui.units[key].unit.name}} has been destroyed!</span>
									</li>
									<li ng-repeat="key in round.status.fled">
										<span class="text-info">{{ui.units[key].unit.name}} has fled!
									</li>
								</ul>
							</li>
						</ul>
						<h4>Destroyed Units</h4>
						<ul>
							<li ng-repeat="key in combat.destroyed">
								{{ui.units[key].unit.name}} was destroyed.
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>